{"remainingRequest":"/opt/workspace/mediumish-vuepress-blog-theme/node_modules/babel-loader/lib/index.js??ref--3-1!/opt/workspace/mediumish-vuepress-blog-theme/node_modules/cache-loader/dist/cjs.js??ref--0-0!/opt/workspace/mediumish-vuepress-blog-theme/node_modules/vue-loader/lib/index.js??vue-loader-options!/opt/workspace/mediumish-vuepress-blog-theme/components/Toc.vue?vue&type=script&lang=js&","dependencies":[{"path":"/opt/workspace/mediumish-vuepress-blog-theme/components/Toc.vue","mtime":1658532433972},{"path":"/opt/workspace/mediumish-vuepress-blog-theme/node_modules/cache-loader/dist/cjs.js","mtime":1658533780128},{"path":"/opt/workspace/mediumish-vuepress-blog-theme/node_modules/babel-loader/lib/index.js","mtime":1658533779966},{"path":"/opt/workspace/mediumish-vuepress-blog-theme/node_modules/cache-loader/dist/cjs.js","mtime":1658533780128},{"path":"/opt/workspace/mediumish-vuepress-blog-theme/node_modules/vue-loader/lib/index.js","mtime":1658533780964}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFN0aWNrZXIgZnJvbSAnLi9TdGlja2VyLnZ1ZSc7CmxldCBpbml0VG9wOyAvLyBnZXQgb2Zmc2V0IHRvcAoKZnVuY3Rpb24gZ2V0QWJzb2x1dGVUb3AoZG9tKSB7CiAgcmV0dXJuIGRvbSAmJiBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID8gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA6IDA7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBTdGlja2VyCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjdGl2ZUluZGV4OiAwCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICB2aXNpYmxlKCkgewogICAgICByZXR1cm4gdGhpcy4kZnJvbnRtYXR0ZXIgJiYgdGhpcy4kZnJvbnRtYXR0ZXIudG9jICE9PSBmYWxzZSAmJiAhISh0aGlzLiRwYWdlICYmIHRoaXMuJHBhZ2UuaGVhZGVycyAmJiB0aGlzLiRwYWdlLmhlYWRlcnMubGVuZ3RoKTsKICAgIH0KCiAgfSwKICB3YXRjaDogewogICAgYWN0aXZlSW5kZXgoKSB7CiAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy4kcmVmcy5jaGFpclRvY0l0ZW0gfHwgW107CiAgICAgIGNvbnN0IGRvbSA9IGl0ZW1zW3RoaXMuYWN0aXZlSW5kZXhdOwogICAgICBpZiAoIWRvbSkgcmV0dXJuOwogICAgICBjb25zdCByZWN0ID0gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICBjb25zdCB3cmFwcGVyUmVjdCA9IHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICBjb25zdCB0b3AgPSByZWN0LnRvcCAtIHdyYXBwZXJSZWN0LnRvcDsKCiAgICAgIGlmICh0b3AgPCAyMCkgewogICAgICAgIHRoaXMuJGVsLnNjcm9sbFRvcCA9IHRoaXMuJGVsLnNjcm9sbFRvcCArIHRvcCAtIDIwOwogICAgICB9IGVsc2UgaWYgKHRvcCArIHJlY3QuaGVpZ2h0ID4gd3JhcHBlclJlY3QuaGVpZ2h0KSB7CiAgICAgICAgdGhpcy4kZWwuc2Nyb2xsVG9wICs9IHJlY3QudG9wIC0gKHdyYXBwZXJSZWN0LmhlaWdodCAtIHJlY3QuaGVpZ2h0KTsKICAgICAgfQogICAgfSwKCiAgICAkcm91dGUoKSB7fQoKICB9LAoKICBtb3VudGVkKCkgewogICAgLy8gc3luYyB2aXNpYmxlIHRvIHBhcmVudCBjb21wb25lbnQKICAgIGNvbnN0IHN5bmNWaXNpYmxlID0gKCkgPT4gewogICAgICB0aGlzLiRlbWl0KCd2aXNpYmxlLWNoYW5nZScsIHRoaXMudmlzaWJsZSk7CiAgICB9OwoKICAgIHN5bmNWaXNpYmxlKCk7CiAgICB0aGlzLiR3YXRjaCgndmlzaWJsZScsIHN5bmNWaXNpYmxlKTsgLy8gYmluZGluZyBldmVudAoKICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy50cmlnZ2VyRXZ0KCksIDEwMDApOwoKICAgIHRoaXMuX29uU2Nyb2xsID0gKCkgPT4gdGhpcy5vblNjcm9sbCgpOwoKICAgIHRoaXMuX29uSGFzaENoYW5nZSA9ICgpID0+IHsKICAgICAgY29uc3QgaGFzaCA9IGRlY29kZVVSSUNvbXBvbmVudChsb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSk7CiAgICAgIGNvbnN0IGluZGV4ID0gKHRoaXMuJHBhZ2UuaGVhZGVycyB8fCBbXSkuZmluZEluZGV4KGggPT4gaC5zbHVnID09PSBoYXNoKTsKICAgICAgaWYgKGluZGV4ID49IDApIHRoaXMuYWN0aXZlSW5kZXggPSBpbmRleDsKICAgICAgY29uc3QgZG9tID0gaGFzaCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYXNoKTsKICAgICAgaWYgKGRvbSkgd2luZG93LnNjcm9sbFRvKDAsIGdldEFic29sdXRlVG9wKGRvbSkgLSAyMCk7CiAgICB9OwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLl9vblNjcm9sbCk7IC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5fb25IYXNoQ2hhbmdlKTsKICB9LAoKICBiZWZvcmVEZXN0cm95KCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX29uU2Nyb2xsKTsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5fb25IYXNoQ2hhbmdlKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBvblNjcm9sbCgpIHsKICAgICAgaWYgKGluaXRUb3AgPT09IHVuZGVmaW5lZCkgewogICAgICAgIGluaXRUb3AgPSBnZXRBYnNvbHV0ZVRvcCh0aGlzLiRlbCk7CiAgICAgIH0gLy8gdXBkYXRlIHBvc2l0aW9uCgoKICAgICAgY29uc3Qgc2Nyb2xsVG9wID0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOwogICAgICBjb25zdCBoZWFkaW5ncyA9IHRoaXMuJHBhZ2UuaGVhZGVycyB8fCBbXTsgLy8gY2hhbmdlIGFjdGl2ZSB0b2Mgd2l0aCBzY3JvbGxpbmcKCiAgICAgIGxldCBpID0gMDsKCiAgICAgIGNvbnN0IGFkZExpbmsgPSBpbmRleCA9PiB7CiAgICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IGluZGV4OwogICAgICB9OwoKICAgICAgZm9yICg7IGkgPCBoZWFkaW5ncy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGRvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhlYWRpbmdzW2ldLnNsdWcpOwogICAgICAgIGNvbnN0IHRvcCA9IGdldEFic29sdXRlVG9wKGRvbSk7CgogICAgICAgIGlmICh0b3AgLSA1MCA8IHNjcm9sbFRvcCkgewogICAgICAgICAgYWRkTGluayhpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCFpKSBhZGRMaW5rKGkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIHRyaWdnZXJFdnQoKSB7CiAgICAgIHRoaXMuX29uU2Nyb2xsKCk7CgogICAgICB0aGlzLl9vbkhhc2hDaGFuZ2UoKTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"names":["Sticker","initTop","getAbsoluteTop","dom","getBoundingClientRect","top","document","body","scrollTop","documentElement","components","data","activeIndex","computed","visible","$frontmatter","toc","$page","headers","length","watch","items","$refs","chairTocItem","rect","wrapperRect","$el","height","$route","mounted","syncVisible","$emit","$watch","setTimeout","triggerEvt","_onScroll","onScroll","_onHashChange","hash","decodeURIComponent","location","substring","index","findIndex","h","slug","getElementById","window","scrollTo","addEventListener","beforeDestroy","removeEventListener","methods","undefined","headings","i","addLink"],"sources":["/opt/workspace/mediumish-vuepress-blog-theme/components/Toc.vue"],"sourcesContent":["\nimport Sticker from './Sticker.vue'\nlet initTop\n\n// get offset top\nfunction getAbsoluteTop(dom) {\n  return dom && dom.getBoundingClientRect\n    ? dom.getBoundingClientRect().top +\n        document.body.scrollTop +\n        document.documentElement.scrollTop\n    : 0\n}\n\nexport default {\n  components: {\n    Sticker,\n  },\n\n  data() {\n    return {\n      activeIndex: 0,\n    }\n  },\n\n  computed: {\n    visible() {\n      return (\n        this.$frontmatter &&\n        this.$frontmatter.toc !== false &&\n        !!(this.$page && this.$page.headers && this.$page.headers.length)\n      )\n    },\n  },\n\n  watch: {\n    activeIndex() {\n      const items = this.$refs.chairTocItem || []\n      const dom = items[this.activeIndex]\n      if (!dom) return\n      const rect = dom.getBoundingClientRect()\n      const wrapperRect = this.$el.getBoundingClientRect()\n      const top = rect.top - wrapperRect.top\n      if (top < 20) {\n        this.$el.scrollTop = this.$el.scrollTop + top - 20\n      } else if (top + rect.height > wrapperRect.height) {\n        this.$el.scrollTop += rect.top - (wrapperRect.height - rect.height)\n      }\n    },\n\n    $route() {},\n  },\n\n  mounted() {\n    // sync visible to parent component\n    const syncVisible = () => {\n      this.$emit('visible-change', this.visible)\n    }\n    syncVisible()\n    this.$watch('visible', syncVisible)\n\n    // binding event\n    setTimeout(() => this.triggerEvt(), 1000)\n\n    this._onScroll = () => this.onScroll()\n    this._onHashChange = () => {\n      const hash = decodeURIComponent(location.hash.substring(1))\n      const index = (this.$page.headers || []).findIndex(h => h.slug === hash)\n      if (index >= 0) this.activeIndex = index\n      const dom = hash && document.getElementById(hash)\n      if (dom) window.scrollTo(0, getAbsoluteTop(dom) - 20)\n    }\n    window.addEventListener('scroll', this._onScroll)\n    // window.addEventListener('hashchange', this._onHashChange);\n  },\n\n  beforeDestroy() {\n    window.removeEventListener('scroll', this._onScroll)\n    window.removeEventListener('hashchange', this._onHashChange)\n  },\n\n  methods: {\n    onScroll() {\n      if (initTop === undefined) {\n        initTop = getAbsoluteTop(this.$el)\n      }\n\n      // update position\n      const scrollTop =\n        document.body.scrollTop + document.documentElement.scrollTop\n      const headings = this.$page.headers || []\n\n      // change active toc with scrolling\n      let i = 0\n      const addLink = index => {\n        this.activeIndex = index\n      }\n\n      for (; i < headings.length; i++) {\n        const dom = document.getElementById(headings[i].slug)\n        const top = getAbsoluteTop(dom)\n        if (top - 50 < scrollTop) {\n          addLink(i)\n        } else {\n          if (!i) addLink(i)\n          break\n        }\n      }\n    },\n\n    triggerEvt() {\n      this._onScroll()\n      this._onHashChange()\n    },\n  },\n}\n"],"mappings":"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"}]}