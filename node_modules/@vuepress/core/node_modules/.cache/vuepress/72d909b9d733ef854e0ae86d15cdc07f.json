{"remainingRequest":"/opt/workspace/mediumish-vuepress-blog-theme/node_modules/babel-loader/lib/index.js??ref--3-1!/opt/workspace/mediumish-vuepress-blog-theme/node_modules/vuepress-plugin-mailchimp/src/mailchimpSubscribe.js","dependencies":[{"path":"/opt/workspace/mediumish-vuepress-blog-theme/node_modules/vuepress-plugin-mailchimp/src/mailchimpSubscribe.js","mtime":1658533738930},{"path":"/opt/workspace/mediumish-vuepress-blog-theme/node_modules/cache-loader/dist/cjs.js","mtime":1658533780128},{"path":"/opt/workspace/mediumish-vuepress-blog-theme/node_modules/babel-loader/lib/index.js","mtime":1658533779966}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGpzb25wIGZyb20gJ2pzb25wJzsKaW1wb3J0IHF1ZXJ5U3RyaW5nIGZyb20gJ3F1ZXJ5LXN0cmluZyc7CmltcG9ydCBfZGVidWcgZnJvbSAnZGVidWcnOwoKY29uc3QgZGVidWcgPSBfZGVidWcoJ3BsdWdpbi1tYWlsY2hpbXAnKTsKLyoqCiAqIElmIGRldmVsb3BlcnMgbWFrZSBVSSBjdXN0b21penRpb24gYW5kIG9mZmVyIHVzZXJzIGFuIG9wdGlvbiB3aGV0aGVyIHRvIGVuYWJsZS4KICogSXQgd29uJ3QgYmUgYWJsZSB0byBpbXBvcnQgY2xpZW50IGR5bmFtaWMgbW9kdWxlcyBpZiBpdCdzIGRpc2FibGVkLgogKiBVc2UgY29tbW9uSnMgYmVjYXVzZSBkeW5hbWljIGltcG9ydCBjYW5ub3QgYmUgY2F1Z2h0IGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrL3dlYnBhY2svaXNzdWVzLzUzNjAKICovCgoKbGV0IGVuZHBvaW50OwoKdHJ5IHsKICBjb25zdCBvcHRpb25zID0gcmVxdWlyZSgnQGR5bmFtaWMvbWFpbGNoaW1wT3B0aW9ucycpOwoKICBlbmRwb2ludCA9IG9wdGlvbnMuZW5kcG9pbnQ7Cn0gY2F0Y2ggKGVycm9yKSB7CiAgZGVidWcoJ0ZhaWwgdG8gZ2V0IG9wdGlvbnMnLCBlcnJvci5tZXNzYWdlKTsKfQoKY29uc3Qgc3Vic2NyaWJlVG9NYWlsY2hpbXAgPSBmdW5jdGlvbiBhZGRUb01haWxjaGltcChlbWFpbCwgZmllbGRzKSB7CiAgY29uc3QgZW1haWxFbmNvZGVkID0gZW5jb2RlVVJJQ29tcG9uZW50KGVtYWlsKTsKICBsZXQgdXJsID0gZW5kcG9pbnQucmVwbGFjZSgvXC9wb3N0L2csICcvcG9zdC1qc29uJyk7CiAgY29uc3QgbGlzdEZpZWxkcyA9IGZpZWxkcyA/ICcmJyArIHF1ZXJ5U3RyaW5nLnN0cmluZ2lmeShmaWVsZHMpIDogJyc7CiAgY29uc3QgcXVlcnlQYXJhbXMgPSBgJkVNQUlMPSR7ZW1haWxFbmNvZGVkfSR7bGlzdEZpZWxkc31gOwogIHVybCA9IGAke3VybH0ke3F1ZXJ5UGFyYW1zfWA7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IGpzb25wKHVybCwgewogICAgcGFyYW06ICdjJywKICAgIHRpbWVvdXQ6IDM1MDAKICB9LCAoZXJyLCBkYXRhKSA9PiB7CiAgICBpZiAoZXJyKSB7CiAgICAgIGRlYnVnKCdSZXF1ZXN0IGZhaWxlZCcsIGVycik7CiAgICAgIHJlamVjdChlcnIpOwogICAgfQoKICAgIGlmIChkYXRhKSB7CiAgICAgIGRlYnVnKCdSZXF1ZXN0IHN1Y2Nlc3MnLCBkYXRhKTsKICAgICAgcmVzb2x2ZShkYXRhKTsKICAgIH0KICB9KSk7Cn07CgpleHBvcnQgZGVmYXVsdCBzdWJzY3JpYmVUb01haWxjaGltcDs="},{"version":3,"names":["jsonp","queryString","_debug","debug","endpoint","options","require","error","message","subscribeToMailchimp","addToMailchimp","email","fields","emailEncoded","encodeURIComponent","url","replace","listFields","stringify","queryParams","Promise","resolve","reject","param","timeout","err","data"],"sources":["/opt/workspace/mediumish-vuepress-blog-theme/node_modules/vuepress-plugin-mailchimp/src/mailchimpSubscribe.js"],"sourcesContent":["import jsonp from 'jsonp';\nimport queryString from 'query-string';\nimport _debug from 'debug';\n\nconst debug = _debug('plugin-mailchimp');\n\n/**\n * If developers make UI customiztion and offer users an option whether to enable.\n * It won't be able to import client dynamic modules if it's disabled.\n * Use commonJs because dynamic import cannot be caught https://github.com/webpack/webpack/issues/5360\n */\nlet endpoint;\ntry {\n  const options = require('@dynamic/mailchimpOptions');\n  endpoint = options.endpoint;\n} catch (error) {\n  debug('Fail to get options', error.message);\n}\n\nconst subscribeToMailchimp = function addToMailchimp(email, fields) {\n  const emailEncoded = encodeURIComponent(email);\n  let url = endpoint.replace(/\\/post/g, '/post-json');\n  const listFields = fields ? '&' + queryString.stringify(fields) : '';\n  const queryParams = `&EMAIL=${emailEncoded}${listFields}`;\n  url = `${url}${queryParams}`;\n\n  return new Promise((resolve, reject) =>\n    jsonp(url, { param: 'c', timeout: 3500 }, (err, data) => {\n      if (err) {\n        debug('Request failed', err);\n        reject(err);\n      }\n      if (data) {\n        debug('Request success', data);\n        resolve(data);\n      }\n    })\n  );\n};\n\nexport default subscribeToMailchimp;\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,MAAP,MAAmB,OAAnB;;AAEA,MAAMC,KAAK,GAAGD,MAAM,CAAC,kBAAD,CAApB;AAEA;AACA;AACA;AACA;AACA;;;AACA,IAAIE,QAAJ;;AACA,IAAI;EACF,MAAMC,OAAO,GAAGC,OAAO,CAAC,2BAAD,CAAvB;;EACAF,QAAQ,GAAGC,OAAO,CAACD,QAAnB;AACD,CAHD,CAGE,OAAOG,KAAP,EAAc;EACdJ,KAAK,CAAC,qBAAD,EAAwBI,KAAK,CAACC,OAA9B,CAAL;AACD;;AAED,MAAMC,oBAAoB,GAAG,SAASC,cAAT,CAAwBC,KAAxB,EAA+BC,MAA/B,EAAuC;EAClE,MAAMC,YAAY,GAAGC,kBAAkB,CAACH,KAAD,CAAvC;EACA,IAAII,GAAG,GAAGX,QAAQ,CAACY,OAAT,CAAiB,SAAjB,EAA4B,YAA5B,CAAV;EACA,MAAMC,UAAU,GAAGL,MAAM,GAAG,MAAMX,WAAW,CAACiB,SAAZ,CAAsBN,MAAtB,CAAT,GAAyC,EAAlE;EACA,MAAMO,WAAW,GAAI,UAASN,YAAa,GAAEI,UAAW,EAAxD;EACAF,GAAG,GAAI,GAAEA,GAAI,GAAEI,WAAY,EAA3B;EAEA,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KACjBtB,KAAK,CAACe,GAAD,EAAM;IAAEQ,KAAK,EAAE,GAAT;IAAcC,OAAO,EAAE;EAAvB,CAAN,EAAqC,CAACC,GAAD,EAAMC,IAAN,KAAe;IACvD,IAAID,GAAJ,EAAS;MACPtB,KAAK,CAAC,gBAAD,EAAmBsB,GAAnB,CAAL;MACAH,MAAM,CAACG,GAAD,CAAN;IACD;;IACD,IAAIC,IAAJ,EAAU;MACRvB,KAAK,CAAC,iBAAD,EAAoBuB,IAApB,CAAL;MACAL,OAAO,CAACK,IAAD,CAAP;IACD;EACF,CATI,CADA,CAAP;AAYD,CAnBD;;AAqBA,eAAejB,oBAAf"}]}